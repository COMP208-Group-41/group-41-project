<!DOCTYPE html>
<head>
    <title>OutOut - Edit Event Details</title>
    <link rel="stylesheet" type="text/css" href="../css/events.css">
</head>
<body>
<form name='EventForm' method='post'>
    <div>
        <label for='venue'>Select a Venue</label>
        <select name='venue' id='venue'>
            <option value='None'>Select Venue</option>
            <!-- PHP HERE -->
        </select><br>
        <label for='Event'>Select a Event to edit:</label>
        <select name='event' id='event'>
            <option value='None'>Select Event</option>
            <!-- PHP HERE -->
        </select><br>
        <input type='text' name='name' placeholder="Event Name"  value="" required><br>
        <input type='text' name='description' placeholder="Event Description" value="" required> <br>
        <p>Date and Time must be in the format: dd-mm-yyyy hh:mm (24 hour time)</p><br>
        <label for='endTime'>Event Start Time:</label>
        <input type='datetime-local' id="startTime" name='startTime' placeholder="Start time" value="" required>
        <label for='endTime'>Event End Time:</label>
        <input type='datetime-local' id="endTime" name='endTime' placeholder="End time" value="" required><br>
        Event Image: <br>
        <input type='file' id="eventImage" name='eventImage' class='input-file' accept="image/*">
        <label for="eventImage">Upload Image</label>
        <div class="image-preview" id="imagePreview">
            <img src="" alt="Image Preview" class="image-preview__image">
            <span class="image-preview__default-text">Image Preview</span>
        </div>

        <input type='text' id="ticketSite" name='ticketSite' placeholder="Ticket Sale Link"><Br>
        <!-- TAG INPUT -->
        <p>Current Tags: </p>
        <label for='tag1'>Add Tags for your event, these are optional but are used to recommend your event to users. Any changes made below will overwrite any existing Tags, If you want to keep the existing Tags then leave the tag fields below empty</label><br>
        <select name='tag1' id='tag1'>
            <option value='Optional'>No Tag</option>
        </select>
        <select name='tag2' id='tag2'>
            <option value='Optional'>No Tag</option>
        </select>
        <select name='tag3' id='tag3'>
            <option value='Optional'>No Tag</option>
        </select>
        <select name='tag4' id='tag4'>
            <option value='Optional'>No Tag</option>
        </select>
        <select name='tag5' id='tag5'>
            <option value='Optional'>No Tag</option>
        </select><br>
        <script>
            var dtt = document.getElementById('startTime');
            dtt.onfocus = function (event) {
                this.type = 'datetime-local';
                this.focus();
            };
            dtt.onblur = function (event) {
                this.type = 'text';
                this.blur();
            };
            var ett = document.getElementById('endTime');
            ett.onfocus = function (event) {
                this.type = 'datetime-local';
                this.focus();
            };
            ett.onblur = function (event) {
                this.type = 'text';
                this.blur();
            };

            // For Image Preview
            const inpFile = document.getElementById("eventImage");
            const previewContainer = document.getElementById("imagePreview");
            const previewImage = previewContainer.querySelector(".image-preview__image");
            const previewDefaultText = previewContainer.querySelector(".image-preview__default-text");

            inpFile.addEventListener("change", function() {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();

                    previewDefaultText.style.display = "none";
                    previewImage.style.display = "block";

                    reader.addEventListener("load", function() {
                        previewImage.setAttribute("src", this.result);
                    });

                    reader.readAsDataURL(file);
                }
            });
        </script>
    </div>
    <div style= "display: flex">
        <input type='password' name='password' autocomplete="off" placeholder="Current Password" required><br>
        <input type='submit' value='Update'>
<!--        TODO: FILL IN HREF ONCLICK OF CANCEL-->
        <input type="button" onclick="location.href='BACK TO DASHBOARD OR HOMEPAGE';" value="Cancel" />
    </div>
</form>
</body>
